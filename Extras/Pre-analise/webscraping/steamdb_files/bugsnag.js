(()=>{var S=class{client;constructor(e){this.client=e}async sendEvent({apiKey:e,events:t,notifier:r,payloadVersion:o}){let s=new Date().toISOString(),i=JSON.stringify({apiKey:e,payloadVersion:o,notifier:r,events:t});await fetch(this.client.endpoints.notify,{method:"POST",mode:"cors",credentials:"omit",headers:{"Content-Type":"application/json","Bugsnag-Api-Key":e,"Bugsnag-Payload-Version":o,"Bugsnag-Sent-At":s},referrerPolicy:"no-referrer",body:i})}},K=Symbol("Circular"),q=Symbol("AccessError");function H(n,e,t){return O({key:"",value:n,replacer:e,seen:[],depth:0,depthLimit:t?.depthLimit,edgeIndex:0,edgesLimit:t?.edgesLimit})}function O({key:n,value:e,replacer:t,seen:r,depthLimit:o=1/0,depth:s,edgeIndex:i,edgesLimit:c=1/0}){let a=e;if(r.includes(a)&&(a=K),t&&(a=t(n,a)),J(a)&&(a=w(()=>a.toJSON(String(n)))),a===null||typeof a!="object")return a;if(s>o||i+1>c)return"[...]";if(r.push(e),Array.isArray(a)){let l=[],u=Math.min(a.length,c);for(let d=0;d<u;d++){let f=w(()=>a[d]);l.push(O({key:d,value:f,replacer:t,seen:r,depth:s,depthLimit:o,edgeIndex:d,edgesLimit:c}))}u<a.length&&l.push("[...]"),a=l}else{let l={},u=Object.keys(a);for(let d=0;d<u.length;d++){let f=u[d],g=w(()=>a[f]);l[f]=O({key:f,value:g,replacer:t,seen:r,depth:s,depthLimit:o,edgeIndex:d,edgesLimit:c})}a=l}return r.pop(),a}function w(n){try{return n()}catch{return q}}function J(n){return typeof n=="object"&&n!==null&&"toJSON"in n&&typeof n.toJSON=="function"}var X=Object.prototype.toString,z=Object.getPrototypeOf,G="[object Error]";function Y(n){if(n instanceof Error)return!0;let e=n;for(;e;){if(X.call(e)===G)return!0;e=z(e)}return!1}function x(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}var C=/^\s*at .*(\S+:\d+|\(native\))/m,Q=/^(eval@)?(\[native code])?$/;function Z(n){return(n.match(C)?ee(n):te(n)).reduce((t,r)=>{if(JSON.stringify(r)==="{}")return t;let o=!r.file&&!r.method&&typeof r.lineNumber=="number"?"global code":r.file||"(unknown file)";o=o.replace(/\?.*$/,"").replace(/#.*$/,"");let s=r.method||"(unknown function)";return s=/^global code$/i.test(s)?"global code":s,t.concat([{file:o,lineNumber:r.lineNumber,columnNumber:r.columnNumber,method:s}])},[])}function ee(n){return n.split(`
`).filter(t=>!!t.match(C)).map(t=>{t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));let r=t.replace(/^\s+/,"").replace(/\(eval code/g,"("),o=r.match(/ (\((.+):(\d+):(\d+)\)$)/);r=o?r.replace(o[0],""):r;let s=r.split(/\s+/).slice(1),i=k(o?o[1]:s.pop()||"(no location)"),c=s.join(" ")||void 0;return{file:["eval","<anonymous>"].indexOf(i[0])>-1?void 0:i[0],lineNumber:i[1],columnNumber:i[2],method:c}})}function te(n){return n.split(`
`).filter(t=>!t.match(Q)).map(t=>{if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),t.indexOf("@")===-1&&t.indexOf(":")===-1)return{method:t};{let r=/((.*".+"[^@]*)?[^@]*)(?:@)/,o=t.match(r),s=o&&o[1]?o[1]:void 0,i=k(t.replace(r,""));return{file:i[0],lineNumber:i[1],columnNumber:i[2],method:s}}})}function k(n){if(n.indexOf(":")===-1)return[n];let t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(n.replace(/[()]/g,""));if(!t)return[n];let r=t[2]?parseInt(t[2],10):void 0,o=t[3]?parseInt(t[3],10):void 0;return[t[1],r,o]}function b(n,e){let t=j(n,e),r;t.name==="InvalidError"&&(r={[e]:{"non-error parameter":n}}),typeof t.metadata<"u"&&x(t.metadata)&&(r={...r,[t.name]:t.metadata});let o=[N(t)];return o.push(...R(t).map(s=>N(s,{backtrace:!1}))),{exceptions:o,metadata:r}}function j(n,e){if(Y(n))return n;let t=ne(n);if(t)return t;switch(typeof t){case"string":case"number":case"boolean":return new Error(String(n));default:return t=new Error(`${e} received a non-error. See "${e}" tab for more detail.`),t.name="InvalidError",t}}function ne(n){if(!x(n))return null;let e=s=>typeof n[s]=="string"&&n[s].length?n[s]:void 0,t=e("name")||e("errorClass"),r=e("message")||e("errorMessage");if(!t||!r)return null;let o=new Error(r);return o.name=t,o}function N(n,e={backtrace:!1}){return{errorClass:n.name,message:n.message,stacktrace:re(n,e),type:typeof self=="object"&&self.navigator?"browserjs":"nodejs"}}function re(n,{backtrace:e}){let t=oe(n);return t?Z(t):e?ie():[]}function oe(n){let e=n.stack||n.stacktrace;return typeof e=="string"&&e.length&&e!==`${n.name}: ${n.message}`?e:void 0}var se=20;function ie(){let n=[],e;try{e=arguments.callee}catch{return[]}for(;e&&n.length<se;){e.name?n.push({method:e.name,file:"(unknown file)"}):/function(?:\s+([\w$]+))+\s*\(/.test(e.toString())&&n.push({method:RegExp.$1,file:"(unknown file)"});try{e=e.caller}catch{break}}return n}function R(n){if(!n.cause)return[];let e=j(n.cause,"cause");return e.name==="InvalidError"?[]:[e].concat(R(e))}var P={name:"browserNotifyUnhandledExceptions",load(n){self.addEventListener("error",e=>{let t,r;if(e instanceof ErrorEvent){let{message:o,filename:s,lineno:i,colno:c,error:a}=e,l=Number.isSafeInteger(i)?i:void 0;if(l===0&&/Script error\.?/.test(o)){console.log("Ignoring cross-domain or eval script error.");return}({exceptions:t,metadata:r}=b(a,"window onerror"));let u=Number.isSafeInteger(c)?c:void 0,{stacktrace:d}=t[0];if(!d.length)d.push({file:s,lineNumber:l,columnNumber:u,method:"(unknown file)"});else{let f=d[0];f.file=f.file||s,f.lineNumber=f.lineNumber??l,f.columnNumber=f.columnNumber??u}}else({exceptions:t,metadata:r}=b(e,"window onerror"));n.notifyEvent({exceptions:t,unhandled:!0,severity:"error",severityReason:{type:"unhandledException"},metadata:r},e)})}},$={name:"browserNotifyUnhandledRejections",load(n){self.addEventListener("unhandledrejection",e=>{let t=e.reason,{exceptions:r,metadata:o}=b(t,"unhandledrejection");n.notifyEvent({exceptions:r,unhandled:!0,severity:"error",severityReason:{type:"unhandledPromiseRejection"},metadata:o},t)})}},A={name:"consoleBreadcrumbs",load(n){let e=["log","debug","info","warn","error"].filter(t=>typeof console<"u"&&typeof console[t]=="function");for(let t of e){let r=console[t];console[t]=(...o)=>{n.leaveBreadcrumb("Console output",o.reduce((s,i,c)=>{let a="[Unknown value]";try{a=String(i)}catch{}if(a==="[object Object]")try{a=JSON.stringify(i)}catch{}return s[`[${c}]`]=a,s},{severity:t}),"log"),r.apply(console,o)}}}},W={name:"errorBreadcrumbs",load(n){n.addOnPostError(e=>{n.leaveBreadcrumb(e.exceptions[0].errorClass,{errorClass:e.exceptions[0].errorClass,errorMessage:e.exceptions[0].message,severity:e.severity},"error")})}},D={name:"fetchBreadcrumbs",load(n){if(!("fetch"in self))return;let e=self.fetch;self.fetch=function(r,o){let s="GET",i;ae(r)?(i=r.url,s=r.method):i=r.toString(),o&&typeof o.method=="string"&&o.method.length&&(s=o.method);let c=n.leaveBreadcrumb.bind(n);return new Promise((a,l)=>{e(r,o).then(u=>{ce({response:u,method:s,url:i,leaveBreadcrumb:c}),a(u)}).catch(u=>{de({method:s,url:i,leaveBreadcrumb:c}),l(u)})})}}};function ae(n){return n instanceof Request||x(n)&&"url"in n}function ce({response:n,method:e,url:t,leaveBreadcrumb:r}){if(t.startsWith("https://notify.bugsnag.com"))return;let o={status:n.status,request:`${e} ${t}`};n.status>=400?r("fetch() failed",o,"request"):r("fetch() succeeded",o,"request")}function de({method:n,url:e,leaveBreadcrumb:t}){e.startsWith("https://notify.bugsnag.com")||t("fetch() error",{request:`${n} ${e}`},"request")}var T={name:"navigationBreadcrumbs",load(n){if(!("addEventListener"in self))return;let e=r=>()=>n.leaveBreadcrumb(r,void 0,"navigation");self.addEventListener("pagehide",e("Page hidden"),!0),self.addEventListener("pageshow",e("Page shown"),!0),self.addEventListener("load",e("Page loaded"),!0),self.document&&self.document.addEventListener("DOMContentLoaded",e("DOMContentLoaded"),!0),self.addEventListener("load",()=>self.addEventListener("popstate",e("Navigated back"),!0)),self.location&&self.addEventListener("hashchange",r=>{let o=r.oldURL?{from:E(r.oldURL),to:E(r.newURL),state:I(self)}:{to:E(self.location.href)};n.leaveBreadcrumb("Hash changed",o,"navigation")},!0);let t=n.leaveBreadcrumb.bind(n);self.history&&self instanceof Window&&(typeof self.history.replaceState=="function"&&B({fn:"replaceState",target:self.history,leaveBreadcrumb:t,win:self}),typeof self.history.pushState=="function"&&B({fn:"pushState",target:self.history,leaveBreadcrumb:t,win:self}))}};function E(n){try{let e=new URL(n);return`${e.pathname}${e.search}${e.hash}`}catch{return n}}function I(n){try{return n.history.state}catch{return{}}}function B({fn:n,leaveBreadcrumb:e,target:t,win:r}){let o=t[n];t[n]=(s,i,c)=>{e(`History ${n}`,le({win:r,state:s,title:i,url:c}),"navigation"),o.apply(t,[s,i,c])}}function le({win:n,state:e,title:t,url:r}){let o=E(n.location.href);return{title:t,state:e,prevState:I(n),to:r||o,from:o}}var M=Date.now(),ue=()=>{M=Date.now()},L={name:"appDuration",load(n){return n.addOnError(e=>{let t=Date.now();e.app=e.app||{},e.app.duration=t-M}),{reset:ue}}};function fe(n){let e=he(n);if(!e)return{};let[t,r]=e,o=ge(n),s=o?.osName==="iOS"?be(n):{};return{browserName:t,browserVersion:r[1],osName:o?.osName,osVersion:o?.osVersion,manufacturer:s?.manufacturer,model:s?.model}}var me=[["Edge (EdgeHTML)",/Edge\/([0-9._]+)/],["Edge (iOS)",/EdgiOS\/([0-9._]+)/],["Yandex",/YaBrowser\/([0-9._]+)/],["KakaoTalk",/KAKAOTALK\s([0-9.]+)/],["Samsung",/SamsungBrowser\/([0-9.]+)/],["Silk",/\bSilk\/([0-9._-]+)\b/],["MIUI",/MiuiBrowser\/([0-9.]+)$/],["Beaker",/BeakerBrowser\/([0-9.]+)/],["Edge (Chromium)",/EdgA?\/([0-9.]+)/],["Chromium WebView",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/],["Chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/],["Chrome (iOS)",/CriOS\/([0-9.]+)(:?\s|$)/],["Firefox",/Firefox\/([0-9.]+)(?:\s|$)/],["Firefox (iOS)",/FxiOS\/([0-9.]+)/],["Opera Mini",/Opera Mini.*Version\/([0-9.]+)/],["Opera",/Opera\/([0-9.]+)(?:\s|$)/],["Opera",/OPR\/([0-9.]+)(:?\s|$)/],["Internet Explorer",/Trident\/7\.0.*rv:([0-9.]+).*\).*Gecko$/],["Internet Explorer",/MSIE\s([0-9.]+);.*Trident\/[4-7].0/],["Internet Explorer",/MSIE\s(7\.0)/],["Blackberry",/BB10;\sTouch.*Version\/([0-9.]+)/],["Android",/Android\s([0-9.]+)/],["Safari (iOS)",/Version\/([0-9._]+).*Mobile.*Safari.*/],["Safari",/Version\/([0-9._]+).*Safari/],["Facebook",/FB[AS]V\/([0-9.]+)/],["Instagram",/Instagram\s([0-9.]+)/],["iOS WebView",/AppleWebKit\/([0-9.]+).*Mobile/],["iOS WebView",/AppleWebKit\/([0-9.]+).*Gecko\)$/]];function he(n){return n!==""&&me.reduce((e,[t,r])=>{if(e)return e;let o=r.exec(n);return!!o&&[t,o]},!1)}var pe=[["iOS",void 0,/iP(hone|od|ad)/],["Android",void 0,/Android/],["BlackBerry",void 0,/BlackBerry|BB10/],["Windows Mobile",void 0,/IEMobile/],["Kindle",void 0,/Kindle/],["Windows","3.11",/Win16/],["Windows","95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows","98",/(Windows 98)|(Win98)/],["Windows","2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows","XP",/(Windows NT 5.1)|(Windows XP)/],["Windows","Server 2003",/(Windows NT 5.2)/],["Windows","Vista",/(Windows NT 6.0)/],["Windows","7",/(Windows NT 6.1)/],["Windows","8",/(Windows NT 6.2)/],["Windows","8.1",/(Windows NT 6.3)/],["Windows","10+",/(Windows NT 10.0)/],["Windows","ME",/Windows ME/],["Open BSD",void 0,/OpenBSD/],["Sun OS",void 0,/SunOS/],["Chrome OS",void 0,/CrOS/],["Linux",void 0,/(Linux)|(X11)/],["Mac OS",void 0,/(Mac_PowerPC)|(Macintosh)/],["QNX",void 0,/QNX/],["BeOS",void 0,/BeOS/],["OS/2",void 0,/OS\/2/]];function ge(n){for(let[e,t,r]of pe)if(r.exec(n))return{osName:e,osVersion:t};return null}function be(n){let e=/iPad|iPhone|iPod/.exec(n);return e?{manufacturer:"Apple",model:e[0]}:/MacIntel/.test(n)&&self.navigator&&self.navigator.maxTouchPoints&&self.navigator.maxTouchPoints>2?{manufacturer:"Apple",model:"iPad"}:null}var ye=n=>({name:"browserContext",load(e){e.addOnError(t=>{t.request={...t.request,url:self.location.href},t.context=t.context||self.location.pathname,t.device={...t.device,...n(self.navigator.userAgent),locale:self.navigator.language,userAgent:self.navigator.userAgent};let r=["n/a"];try{r=self.navigator.languages}catch{}t.metaData={...t.metaData,language:{language:self.navigator.language,languages:r}}})}}),U=ye(fe);var V=n=>{let e=0,t=()=>{e=0};return typeof window<"u"&&window.addEventListener("popstate",t),{name:"limitEvents",load(r){return r.addOnError(function(){if(e>=n)return!1;e++}),{reset:t}}}};var _={name:"browserHandledRejectionBreadcrumbs",load(n){self.addEventListener("rejectionhandled",e=>{let t=e.reason,{exceptions:r}=b(t,"handledrejection"),o=`Handled Promise rejection: [${r[0].errorClass}] ${r[0].message}`;n.leaveBreadcrumb(o,{stacktrace:r[0].stacktrace},"error")})}};var v=class{breadcrumbs=[];config;delivery=new S(this);errorCallbacks=new Set;postErrorCallbacks=new Set;plugins=[];start(e){if(this.config)return console.error("Bugsnag.start called multiple times. Subsequent invocations will be ignored"),this;this.config=e;let t;this.config.onError&&(t=typeof this.config.onError=="function"?[this.config.onError]:this.config.onError),this.errorCallbacks=new Set(t);for(let r of this.config.plugins||[])this.plugins.push({name:r.name||"unknown",plugin:r.load(this)});return this.leaveBreadcrumb("Bugsnag loaded",{},"state"),this}get endpoints(){return{notify:this.config?.endpoints?.notify||"https://notify.bugsnag.com/"}}notify(e,t={}){let{exceptions:r,metadata:o}=b(e,"notify"),s,i;return typeof t=="function"?s=t:(i=t.severity,t.metadata&&(o={...o,...t.metadata})),this.notifyEvent({exceptions:r,metadata:o,severity:i,onError:s},e)}leaveBreadcrumb(e,t,r){if(!this.config)return;if(typeof e!="string")try{e=String(e)}catch{e="Unable to stringify breadcrumb message"}if(!e.length)return;this.breadcrumbs.push({name:e,metaData:t,type:r||"manual",timestamp:new Date().toISOString()});let{maxBreadcrumbs:o=25}=this.config;this.breadcrumbs.length>o&&this.breadcrumbs.splice(0,this.breadcrumbs.length-o)}async notifyEvent({exceptions:e,unhandled:t,severity:r,severityReason:o,metadata:s,onError:i},c){if(!this.config)return;let a=this.config.releaseStage||"production";if(this.config.enabledReleaseStages&&!this.config.enabledReleaseStages.includes(a))return;let l={exceptions:e,breadcrumbs:this.breadcrumbs.length?this.breadcrumbs:void 0,originalError:c,unhandled:typeof t!="boolean"?!1:t,severity:r||"warning",severityReason:o,user:this.config.user||void 0,app:{releaseStage:a,version:this.config.appVersion,type:this.config.appType||(typeof window=="object"?"browser":"node")},device:{time:new Date().toISOString()},metaData:s||{}},u=[...this.errorCallbacks];i&&u.push(i);let d=["stringifyValues","redact"];u.sort((m,h)=>d.includes(m.name)&&d.includes(h.name)?0:d.includes(m.name)?1:d.includes(h.name)?-1:0);for(let m of u){let h=await m(l);if(typeof h=="boolean"&&!h)return}let f={name:"@birchill/bugsnag-zero",version:"1",url:"https://github.com/birchill/bugsnag-zero"},g=H(l,(m,h)=>{if(m!=="originalError")return h},{depthLimit:20,edgesLimit:500}),p,y={apiKey:this.config.apiKey,payloadVersion:"5",notifier:f,events:[g]};try{p=JSON.stringify(y)}catch{g.metaData={notifier:"Unable to serialize metadata"},p=JSON.stringify(y)}if(p.length>1e6&&(g.metaData={notifier:`Payload was ${p.length/1e6}Mb. Metadata removed.`},p=JSON.stringify(y),p.length>1e6))throw new Error("Payload exceeded 1Mb limit");for(let m of this.postErrorCallbacks)m(l);try{await this.delivery.sendEvent(y)}catch(m){console.error("Failed to post report to Bugsnag",m)}}getUser(){return this.config?.user||{}}setUser(e,t,r){this.config&&(this.config.user={id:e,email:t,name:r})}addOnError(e){this.errorCallbacks.add(e)}removeOnError(e){this.errorCallbacks.delete(e)}addOnPostError(e){this.postErrorCallbacks.add(e)}removeOnPostError(e){this.postErrorCallbacks.delete(e)}getPlugin(e){return this.plugins.find(t=>t.name===e)?.plugin}setDelivery(e){this.delivery=e}},F=new v;if(!navigator.webdriver&&"structuredClone"in window){let n=["EvalError","InvalidError","ServerError"];F.start({apiKey:"185908d122d2ed3035950553bb07bd7a",appType:"browser",appVersion:document.body.dataset.rev,plugins:[L,U,_,P,$,W,D,T,A,V(10)],onError:e=>{if(!("SteamDB"in window))return!1;let t=!1,r=location.origin+"/static/";for(let o of e.exceptions){if(n.includes(o.errorClass)||o.errorClass==="TypeError"&&o.message==="Failed to fetch")return!1;for(let s of o.stacktrace){if(/^(?:chrome|moz|safari)-extension:/.test(s.file))return!1;t||(t=s.file.startsWith(r))}}return t}})}})();
